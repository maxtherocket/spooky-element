!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.SpookyEl=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){var select=require("dom-select"),style=require("dom-css"),domify=require("domify"),on=require("dom-event"),off=on.off,append=require("insert").append,prepend=require("insert").prepend,remove=require("insert").remove,mixes=require("mixes"),Signal=require("signals").Signal,atts=require("atts"),elementClass=require("element-class"),NO_VIEW_ERROR_MSG="The view is not defined in this SpookyElement",isUndefined=function(e){return"undefined"!=typeof e},isString=require("is-string"),isFunction=require("is-function"),isElement=require("is-element"),SpookyElement=function(e,i){if(!(this instanceof SpookyElement))return new SpookyElement(e,i);if(e){if(e._isSpookyElement)return e;if(e.jquery){if(!e.length)return this;e=e[0]}}if(i&&i.jquery&&(i=i.length?i[0]:null),this._view=null,this.onAppended=new Signal,this.onPrepended=new Signal,isFunction(e)){this.template=e;var t=domify(this.render(i));this.view=t}else isString(e)?0===e.indexOf("<")?this.view=domify(e):this.select(e,i):isElement(e)?this.view=e:this.template&&(this.view=domify(this.render(e)));this._isSpookyElement=!0};SpookyElement.prototype=Object.create(Array.prototype),mixes(SpookyElement,{view:{set:function(e){this._view=e,null===e?this.length=0:(this[0]=this._view,this.length=1)},get:function(){return this._view}},select:function(e,i){return i&&i._isSpookyElement&&(i=i.view),this.view=select(e,i),this},getElement:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return e?select(e,this.view):this.view},findElement:function(e){return this.getElement(e)},find:function(e){var i=this.getElement(e);return i?new SpookyElement(i):null},findAll:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);var i=select.all(e,this.view),t=[];if(i)for(var n=0,r=i.length;r>n;n+=1){var s=i[n];t.push(SpookyElement(s))}return t},appendTo:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);var i=e;return isString(i)&&(i=select(i)),i&&i._isSpookyElement&&(i=i.view),append(i,this.view),this.onAppended.dispatch(this),this},prependTo:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);var i=e;return isString(i)&&(i=select(i)),i&&i._isSpookyElement&&(i=i.view),prepend(i,this.view),this.onPrepended.dispatch(this),this},append:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return isString(e)&&(e=domify(e)),append(this.view,e),this},prepend:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return isString(e)&&(e=domify(e)),prepend(this.view,e),this},render:function(e){if(this.template&&isFunction(this.template)){var i=this.template(e),t=i.replace(/^\s+|\s+$/g,"");return t}return this},on:function(e,i){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return on(this.view,e,i),this},off:function(e,i){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return off(this.view,e,i),this},css:function(e,i){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return i?style(this.view,e,i):style(this.view,e),this},attr:function(e,i){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return 2==arguments.length?(atts.attr(this.view,e,i),this):1==arguments.length?atts.attr(this.view,e):this},addClass:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return elementClass(this.view).add(e),this},removeClass:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return elementClass(this.view).remove(e),this},hasClass:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return elementClass(this.view).has(e)},getWidth:function(){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return this.view.offsetWidth},getHeight:function(){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return this.view.offsetHeight},html:function(e){if(!this.view)throw new Error(NO_VIEW_ERROR_MSG);return isUndefined(e)?this.view.innerHTML:(this.view.innerHTML=e,this)},animateIn:function(e,i){return i&&i(),this},animateOut:function(e,i){return i&&i(),this},resize:function(e,i){return this.width=e,this.height=i,this.css({width:e,height:i}),this},destroy:function(){this.view&&this.remove(),this.view=null},remove:function(){return this.view&&remove(this.view),this.view=null,this}}),module.exports=SpookyElement},{atts:2,"dom-css":3,"dom-event":9,"dom-select":10,domify:11,"element-class":12,insert:16,"is-element":22,"is-function":23,"is-string":24,mixes:25,signals:27}],2:[function(require,module){!function(root,name,make){"undefined"!=typeof module&&module.exports?module.exports=make():root[name]=make()}(this,"atts",function(){function api(e){return this instanceof api?void((this.length=null==e?0:1)&&(this[0]=e)):new api(e)}function anyAttr(e,fn,scope){var a,o=e.attributes,l=o&&o.length,i=0;if("function"!=typeof fn)return+l||0;for(scope=scope||e;l>i;)if(fn.call(scope,(a=o[i++]).value,a.name,a))return i;return 0}function copy(v,k){this[k]=v}function getAtts(e){var o={};return anyAttr(e,copy,o),o}function setAtts(e,o){for(var n in o)owns.call(o,n)&&attr(e,n,o[n]);return o}function atts(e,o){return void 0===o?getAtts(e):setAtts(e,o)}function normalize(v){return null==v?void 0:""+v}function attr(e,k,v){return void 0===v?normalize(e[getAttr](k)):("boolean"==typeof v?toggleAttr(e,k,v):null===v?e[remAttr](k):e[setAttr](k,v=""+v),v)}function removeAttr(e,keys){keys="string"==typeof keys?keys.match(ssv):[].concat(keys);for(var i=keys&&keys.length;i--;)e[remAttr](keys[i])}function toggleAttr(e,k,force){"boolean"==typeof force||(force=null==e[getAttr](k)||e[k]===!1);var opposite=!force;return force?e[setAttr](k,""):e[remAttr](k),e[k]===opposite?e[k]=force:force}function supportAttr(e,n){if(n in e)return!0;if("class"===n)return"className"in e;for(var p in e)if(n.toLowerCase()===p.toLowerCase())return!0;return!1}function isAttr(e,n){return null!=e[getAttr](n)}function each(stack,fn){for(var l=stack.length,i=0;l>i;i++)fn(stack[i]);return stack}var ssv=/\S+/g,effin=api.prototype,setAttr="setAttribute",getAttr="getAttribute",remAttr="removeAttribute",owns={}.hasOwnProperty;return api.attr=attr,api.atts=atts,api.isAttr=isAttr,api.supportAttr=supportAttr,api.anyAttr=anyAttr,api.removeAttr=removeAttr,api.toggleAttr=toggleAttr,effin.atts=function(o){return void 0===o?atts(this[0]):each(this,function(e){atts(e,o)})},effin.attr=function(k,v){return void 0===v?attr(this[0],k):each(this,function(e){var x="function"==typeof v?v.call(e):v;void 0===x||attr(e,k,x)})},effin.removeAttr=function(keys){return each(this,function(e){removeAttr(e,keys)})},effin.toggleAttr=function(k,force){return each(this,function(e){toggleAttr(e,k,force)})},api})},{}],3:[function(require,module){function style(element,property,value){var camel=cache[property];if("undefined"==typeof camel&&(camel=detect(property)),camel){if(void 0===value)return element.style[camel];element.style[camel]=addPxToStyle(camel,value)}}function each(element,properties){for(var k in properties)properties.hasOwnProperty(k)&&style(element,k,properties[k])}function detect(cssProp){var camel=toCamelCase(cssProp),result=prefix(camel);return cache[camel]=cache[cssProp]=cache[result]=result,result}function set(){2===arguments.length?each(arguments[0],arguments[1]):style(arguments[0],arguments[1],arguments[2])}var prefix=require("prefix-style"),toCamelCase=require("to-camel-case"),cache={"float":"cssFloat"},addPxToStyle=require("add-px-to-style");module.exports=set,module.exports.set=set,module.exports.get=function(element,properties){return Array.isArray(properties)?properties.reduce(function(obj,prop){return obj[prop]=style(element,prop||""),obj},{}):style(element,properties||"")}},{"add-px-to-style":4,"prefix-style":5,"to-camel-case":6}],4:[function(require,module){var IS_UNITLESS={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0};module.exports=function(name,value){return"number"!=typeof value||IS_UNITLESS[name]?value:value+"px"}},{}],5:[function(require,module){var div=null,prefixes=["Webkit","Moz","O","ms"];module.exports=function(prop){div||(div=document.createElement("div"));var style=div.style;if(prop in style)return prop;for(var titleCase=prop.charAt(0).toUpperCase()+prop.slice(1),i=prefixes.length;i>=0;i--){var name=prefixes[i]+titleCase;if(name in style)return name}return!1}},{}],6:[function(require,module){function toCamelCase(string){return toSpace(string).replace(/\s(\w)/g,function(matches,letter){return letter.toUpperCase()})}var toSpace=require("to-space-case");module.exports=toCamelCase},{"to-space-case":7}],7:[function(require,module){function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,function(matches,match){return match?" "+match:""})}var clean=require("to-no-case");module.exports=toSpaceCase},{"to-no-case":8}],8:[function(require,module){function toNoCase(string){return hasSpace.test(string)?string.toLowerCase():(hasSeparator.test(string)&&(string=unseparate(string)),hasCamel.test(string)&&(string=uncamelize(string)),string.toLowerCase())}function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}module.exports=toNoCase;var hasSpace=/\s/,hasCamel=/[a-z][A-Z]/,hasSeparator=/[\W_]/,separatorSplitter=/[\W_]+(.|$)/g,camelSplitter=/(.)([A-Z]+)/g},{}],9:[function(require,module){function on(element,event,callback,capture){return!element.addEventListener&&(event="on"+event),(element.addEventListener||element.attachEvent).call(element,event,callback,capture),callback}function off(element,event,callback,capture){return!element.removeEventListener&&(event="on"+event),(element.removeEventListener||element.detachEvent).call(element,event,callback,capture),callback}module.exports=on,module.exports.on=on,module.exports.off=off},{}],10:[function(require,module){function one(selector,parent){return parent||(parent=document),parent.querySelector(selector)}function all(selector,parent){parent||(parent=document);var selection=parent.querySelectorAll(selector);return Array.prototype.slice.call(selection)}module.exports=one,module.exports.all=all},{}],11:[function(require,module){function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");doc||(doc=document);var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if("body"==tag){var el=doc.createElement("html");return el.innerHTML=html,el.removeChild(el.lastChild)}var wrap=map[tag]||map._default,depth=wrap[0],prefix=wrap[1],suffix=wrap[2],el=doc.createElement("div");for(el.innerHTML=prefix+html+suffix;depth--;)el=el.lastChild;if(el.firstChild==el.lastChild)return el.removeChild(el.firstChild);for(var fragment=doc.createDocumentFragment();el.firstChild;)fragment.appendChild(el.removeChild(el.firstChild));return fragment}module.exports=parse;var bugTestDiv,innerHTMLBug=!1;"undefined"!=typeof document&&(bugTestDiv=document.createElement("div"),bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length,bugTestDiv=void 0);var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],12:[function(require,module){function indexOf(arr,prop){if(arr.indexOf)return arr.indexOf(prop);for(var i=0,len=arr.length;len>i;i++)if(arr[i]===prop)return i;return-1}function ElementClass(opts){if(!(this instanceof ElementClass))return new ElementClass(opts);opts||(opts={}),opts.nodeType&&(opts={el:opts}),this.opts=opts,this.el=opts.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}module.exports=function(opts){return new ElementClass(opts)},ElementClass.prototype.add=function(className){var el=this.el;if(el){if(""===el.className)return el.className=className;var classes=el.className.split(" ");return indexOf(classes,className)>-1?classes:(classes.push(className),el.className=classes.join(" "),classes)}},ElementClass.prototype.remove=function(className){var el=this.el;if(el&&""!==el.className){var classes=el.className.split(" "),idx=indexOf(classes,className);return idx>-1&&classes.splice(idx,1),el.className=classes.join(" "),classes}},ElementClass.prototype.has=function(className){var el=this.el;if(el){var classes=el.className.split(" ");return indexOf(classes,className)>-1}},ElementClass.prototype.toggle=function(className){var el=this.el;el&&(this.has(className)?this.remove(className):this.add(className))}},{}],13:[function(require,module){function after(sibling,first){var node=mutation(toArray(arguments,1)),parent=sibling.parentNode,child=sibling.nextSibling;return parent.insertBefore(node,child),first}var toArray=require("to-array"),mutation=require("./mutation");module.exports=after},{"./mutation":17,"to-array":18}],14:[function(require,module){function append(parent,first){var node=mutation(toArray(arguments,1));return parent.appendChild(node),first}var toArray=require("to-array"),mutation=require("./mutation");module.exports=append},{"./mutation":17,"to-array":18}],15:[function(require,module){function before(sibling,first){var node=mutation(toArray(arguments,1)),parent=sibling.parentNode;return parent.insertBefore(node,sibling),first}var toArray=require("to-array"),mutation=require("./mutation");module.exports=before},{"./mutation":17,"to-array":18}],16:[function(require,module){var mutation=require("./mutation"),prepend=require("./prepend"),append=require("./append"),after=require("./after"),before=require("./before"),remove=require("./remove"),replace=require("./replace");module.exports={prepend:prepend,append:append,after:after,before:before,remove:remove,replace:replace,mutation:mutation}},{"./after":13,"./append":14,"./before":15,"./mutation":17,"./prepend":19,"./remove":20,"./replace":21}],17:[function(require,module){function mutation(list){if(list=list.map(replaceStringWithTextNode),1===list.length)return list[0];var frag=document.createDocumentFragment();return list.forEach(appendToFragment,frag),frag}function replaceStringWithTextNode(string){return"string"==typeof string?document.createTextNode(string):string&&string.view&&string.view.nodeType?string.view:string}function appendToFragment(elem){this.appendChild(elem)}module.exports=mutation},{}],18:[function(require,module){function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++)array[i-index]=list[i];return array}module.exports=toArray},{}],19:[function(require,module){function prepend(parent,first){var node=mutation(toArray(arguments,1));return parent.insertBefore(node,parent.firstChild),first}var toArray=require("to-array"),mutation=require("./mutation");module.exports=prepend},{"./mutation":17,"to-array":18}],20:[function(require,module){function remove(first){var list=toArray(arguments);return list.map(function(elem){return elem&&elem.view&&elem.view.nodeType?elem.view:elem}).forEach(removeFromParent),first}function removeFromParent(elem){elem.parentNode&&elem.parentNode.removeChild(elem)}{var toArray=require("to-array");require("./mutation")}module.exports=remove},{"./mutation":17,"to-array":18}],21:[function(require,module){function replace(target,first){var node=mutation(toArray(arguments,1)),parent=target.parentNode;return parent.replaceChild(node,target),first}var toArray=require("to-array"),mutation=require("./mutation");module.exports=replace},{"./mutation":17,"to-array":18}],22:[function(require,module,exports){!function(root){function isElement(value){return value&&1===value.nodeType&&value&&"object"==typeof value&&Object.prototype.toString.call(value).indexOf("Element")>-1}"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=isElement),exports.isElement=isElement):"function"==typeof define&&define.amd?define([],function(){return isElement}):root.isElement=isElement}(this)},{}],23:[function(require,module){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString},{}],24:[function(require,module){"use strict";var strValue=String.prototype.valueOf,tryStringObject=function(value){try{return strValue.call(value),!0}catch(e){return!1}},toStr=Object.prototype.toString,strClass="[object String]",hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function(value){return"string"==typeof value?!0:"object"!=typeof value?!1:hasToStringTag?tryStringObject(value):toStr.call(value)===strClass}},{}],25:[function(require,module){function mix(obj,entries){for(var k in entries)if(entries.hasOwnProperty(k)){var f=entries[k];if("function"==typeof f)obj[k]=f;else if(f&&"object"==typeof f){var def=xtend(defaults,f);Object.defineProperty(obj,k,def)}}}var xtend=require("xtend"),defaults={enumerable:!0,configurable:!0};module.exports=function(ctor,entries){mix(ctor.prototype,entries)},module.exports.mix=mix},{xtend:26}],26:[function(require,module){function extend(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty},{}],27:[function(require,module){!function(global){function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener,this._isOnce=isOnce,this.context=listenerContext,this._signal=signal,this._priority=priority||0}function validateListener(listener,fnName){if("function"!=typeof listener)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",fnName))}function Signal(){this._bindings=[],this._prevParams=null;var self=this;this.dispatch=function(){Signal.prototype.dispatch.apply(self,arguments)}}SignalBinding.prototype={active:!0,params:null,execute:function(paramsArr){var handlerReturn,params;return this.active&&this._listener&&(params=this.params?this.params.concat(paramsArr):paramsArr,handlerReturn=this._listener.apply(this.context,params),this._isOnce&&this.detach()),handlerReturn},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},Signal.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(listener,isOnce,listenerContext,priority){var binding,prevIndex=this._indexOfListener(listener,listenerContext);if(-1!==prevIndex){if(binding=this._bindings[prevIndex],binding.isOnce()!==isOnce)throw new Error("You cannot add"+(isOnce?"":"Once")+"() then add"+(isOnce?"Once":"")+"() the same listener without removing the relationship first.")}else binding=new SignalBinding(this,listener,isOnce,listenerContext,priority),this._addBinding(binding);return this.memorize&&this._prevParams&&binding.execute(this._prevParams),binding},_addBinding:function(binding){var n=this._bindings.length;do--n;while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding)},_indexOfListener:function(listener,context){for(var cur,n=this._bindings.length;n--;)if(cur=this._bindings[n],cur._listener===listener&&cur.context===context)return n;return-1},has:function(listener,context){return-1!==this._indexOfListener(listener,context)},add:function(listener,listenerContext,priority){return validateListener(listener,"add"),this._registerListener(listener,!1,listenerContext,priority)},addOnce:function(listener,listenerContext,priority){return validateListener(listener,"addOnce"),this._registerListener(listener,!0,listenerContext,priority)},remove:function(listener,context){validateListener(listener,"remove");var i=this._indexOfListener(listener,context);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),listener},removeAll:function(){for(var n=this._bindings.length;n--;)this._bindings[n]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var bindings,paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=paramsArr),n){bindings=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var signals=Signal;signals.Signal=Signal,"function"==typeof define&&define.amd?define(function(){return signals}):"undefined"!=typeof module&&module.exports?module.exports=signals:global.signals=signals}(this)},{}]},{},[1])(1)});